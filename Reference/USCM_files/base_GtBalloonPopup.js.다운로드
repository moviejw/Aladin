(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["base_GtBalloonPopup"],{2674:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticStyle:{position:"absolute","z-index":"30"},style:t.computeStyle},[i("div",{staticClass:"balloonArrow",class:t.computeArrowPos,style:t.computeArrowStyle}),t._v(" "),i("div",{staticClass:"layerPop_bg balloon"},[i("b-container",{staticClass:"layerPop_Content px-0"},[t.isTitle?[t.computeHasTitleSlot?i("div",{staticClass:"layerPop_header d-flex justify-content-between",attrs:{"align-h":"end"}},[i("div",{staticClass:"align-self-center pl-1"},[i("h1",[t._t("header")],2)]),t._v(" "),t.closeTopButtonVisible?i("div",{staticClass:"align-self-center pr-1"},[i("b-button-close",{on:{click:function(e){return e.preventDefault(),t.close()}}})],1):t._e()]):t._e()]:t._e(),t._v(" "),i("b-row",{staticClass:"layerPop_body px-1 pb-0"},[i("b-col",{attrs:{"align-self":"stretch"}},[t._t("content")],2)],1)],2)],1)])},o=[],n=i("986e"),r={props:{yPos:{type:Number,default:0},xPos:{type:Number,default:0},width:{type:String,default:void 0},isTitle:{type:Boolean,default:!0},placement:{type:String,default:"bottom"},closeTopButtonVisible:{type:Boolean,default:!0},closeOutside:{type:Boolean,default:!0},offsetY:{type:Number,default:0},offsetX:{type:Number,default:0}},data(){return{isShow:!0,lftPosition:0,topPosition:0,offsetFromTarget:10,parentObj:"",popupRect:void 0,offsetWidth:0}},computed:{computeHasTitleSlot(){return this.$slots.header},computeStyle(){let t=this.lftPosition+this.xPos;t<0&&(t=0);const e=window.innerWidth-20;return{top:this.topPosition+this.yPos+"px",left:t+"px",maxWidth:e+"px",width:this.computeWidth+"px"}},computeWidth(){return this.width?this.isEmpty(this.width)?this.popupRect.width-this.offsetWidth:Number(this.width.replace("px",""))-this.offsetWidth:""},computeArrowPos(){switch(this.placement){case"left":return"arrow-right";case"right":return"arrow-left";case"top":return"arrow-down";case"bottom":default:return"arrow-up"}},computeArrowStyle(){let t=this.xPos;return this.lftPosition+this.xPos<0&&(t=-(this.lftPosition+this.xPos)),t-=this.offsetWidth/2,{"--arrowLeftOffset":t+"px","--arrowTopOffset":this.yPos+"px"}}},watch:{"$store.state.common.isSideOpen"(){this.setPopupPosition()}},updated(){this.isShow&&this.$el.clientWidth!==Math.round(this.popupRect.width)&&this.setPopupPosition()},mounted(){this.popupRect=this.$el.getBoundingClientRect(),window.addEventListener("resize",this.setPopupPosition),this.isShow=!1},beforeDestroy(){window.removeEventListener("resize",this.setPopupPosition),this.closeOutside&&document.body.removeEventListener("click",this.clickOutSideEvent)},methods:{async show(t){n["a"].$emit("closeBalloonPopup"),this.setInitialize().then(async()=>{var e,i;void 0!==t&&(void 0===t.currentTarget?(await this.setPopupPosition(this.$el,t),this.parentObj=t):(await this.setPopupPosition(this.$el,null!==(e=t.currentTarget)&&void 0!==e?e:t.target),this.parentObj=null!==(i=t.currentTarget)&&void 0!==i?i:t.target));this.setPopupPosition(),n["a"].$on("closeBalloonPopup",function(){this.close()}.bind(this)),this.closeOutside&&setTimeout(()=>{document.body.addEventListener("click",this.clickOutSideEvent)},100)})},setInitialize(){return new Promise(function(t,e){this.isShow=!0,t()}.bind(this))},close(){n["a"].$off("closeBalloonPopup"),this.closeOutside&&document.body.removeEventListener("click",this.clickOutSideEvent),this.isShow=!1,this.$emit("close")},clickOutSideEvent(t){let e=this.$el;e.contains(t.target)||e==t.target||this.close()},setPopupPosition(t,e){var i;this.popupRect=this.$el.getBoundingClientRect(),!this.isEmpty(t)&&t.getBoundingClientRect||(t=this.$el),void 0!=e&&""!=e&&null!=e||(e=this.parentObj);let s=-this.getCurrentOffsetY(t),o=-this.getCurrentOffsetX(t),n=this.getOffsetPosY(e),r=this.getOffsetPosX(e),h=s+n,l=o+r;this.topPosition=h,this.lftPosition=0|l;let p=document.querySelector("#app").getBoundingClientRect();switch(p.width<this.popupRect.width?this.offsetWidth=this.popupRect.width-p.width:this.offsetWidth=0,this.placement){case"left":this.lftPosition-=this.popupRect.width+e.clientWidth/2+this.offsetFromTarget,this.topPosition-=this.popupRect.height/2-e.clientHeight/2;break;case"right":this.lftPosition+=e.clientWidth/2+this.offsetFromTarget,this.topPosition-=this.popupRect.height/2-e.clientHeight/2;break;case"top":this.topPosition-=this.popupRect.height+this.offsetFromTarget,this.lftPosition-=this.popupRect.width/2;break;case"bottom":this.topPosition+=(null!==(i=e.clientHeight)&&void 0!==i?i:0)+this.offsetFromTarget+this.offsetY,this.lftPosition-=this.popupRect.width/2-e.clientWidth/2+this.offsetX;break}},getCurrentOffsetY(t){let e=0;if(t.offsetParent)while(t=t.offsetParent)e+=t.offsetTop;return e},getCurrentOffsetX(t){let e=0;if(t.offsetParent)while(t=t.offsetParent)e+=t.offsetLeft;return e},getOffsetPosY(t){if(void 0==t||""==t||null==t)return 0;var e=0;if(t.offsetParent){e+=t.offsetTop;while(t=t.offsetParent)e+=t.offsetTop}return e},getOffsetPosX(t){if(void 0==t||""==t||null==t)return 0;var e=0;if(t.offsetParent){e=t.offsetLeft;while(t=t.offsetParent)e+=t.offsetLeft}return e}}},h=r,l=(i("e670"),i("2877")),p=Object(l["a"])(h,s,o,!1,null,"24ef2178",null);e["a"]=p.exports},cfcb:function(t,e,i){},e670:function(t,e,i){"use strict";i("cfcb")}}]);