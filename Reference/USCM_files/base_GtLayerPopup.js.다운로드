(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["base_GtLayerPopup"],{3915:function(t,e,o){"use strict";o("810f")},"810f":function(t,e,o){},"902a":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"layerPop",staticStyle:{display:"block",position:"absolute"},style:t.computePos},[o("div",{staticClass:"layerPop_bg"},[o("b-container",{staticClass:"layerPop_Content",style:t.computeStyle},[o("b-row",{staticClass:"layerPop_header",attrs:{"align-h":"end"},on:{mousedown:function(e){return t.mousedownStartDrag(e)}}},[t.computeHasTitleSlot?o("b-col",{attrs:{cols:t.computeHeaderCol}},[o("h1",[t._t("header")],2)]):t._e(),t._v(" "),t.closeTopButtonVisible?o("b-col",{attrs:{cols:t.computeTopCloseCol}},[o("b-button-close",{on:{click:function(e){return e.preventDefault(),t.clickClose()}}})],1):t._e()],1),t._v(" "),t.computeHasContentSlot?o("b-row",{staticClass:"layerPop_body"},[o("b-col",{staticStyle:{"overflow-y":"auto"},style:t.computeContentHeight,attrs:{"align-self":"stretch"}},[o("div",{},[t._t("content")],2)])],1):t._e(),t._v(" "),t.computeHasFooterSlot?o("b-row",{staticClass:"layerPop_footer",attrs:{"align-v":"end"}},[o("b-col",{staticClass:"p-0"},[o("div",{staticClass:"d-flex justify-content-end mr-1"},[t._t("footer")],2)])],1):t._e()],1)],1)])},i=[],l={props:{width:{type:String,default:"auto"},height:{type:String,default:"auto"},minHeight:{type:String,default:"200px"},top:{type:Number,default:0},left:{type:Number,default:0},isBorder:{type:Boolean,default:!1},contentHeight:{type:Number,default:null},closeTopButtonVisible:{type:Boolean,default:!0},isBackground:{type:Boolean,default:!0},closeOutside:{type:Boolean,default:!0},isResizable:{type:Boolean,default:!0}},data(){return{isShow:!0,leftPos:0,topPos:0,minTopPos:40,initTopOffset:10,popupFrame:void 0,mainFrame:void 0,targetObj:null,listner:void 0,curDocumentWidth:0,curDocumentHeight:0,popupZIndex:200,maskZIndex:100,popupCount:0,maskClassName:"layer_mask",maskSelector:".layer_mask"}},computed:{computeHasTitleSlot(){return this.$slots.header},computeHasContentSlot(){return this.$slots.content},computeHasFooterSlot(){return this.$slots.footer},computeHeaderCol(){return this.computeHasTitleSlot&&this.closeTopButtonVisible?"10":this.computeHasTitleSlot&&!this.closeTopButtonVisible?"12":"0"},computeTopCloseCol(){return this.closeTopButtonVisible?"2":"0"},computeStyle(){return{width:this.width,height:this.height,minHeight:this.minHeight,overflow:this.isResizable?"auto":"",resize:this.isResizable?"both":"",border:this.isBorder?"1px solid black":"",moveLeft:0,moveTop:0}},computePos(){return{left:this.leftPos+"px",top:this.topPos+"px",zIndex:this.popupZIndex}},computeContentHeight(){return{height:this.contentHeight?this.contentHeight+"px":"auto"}}},watch:{"$store.state.common.flag.asideUse"(){this.isShow&&this.setPopupPositon()},"$store.state.common.flag.topUse"(){this.isShow&&this.setPopupPositon()},"$store.state.common.flag.gnbUse"(){this.isShow&&this.setPopupPositon()}},beforeDestroy(){this.close()},mounted(){this.isShow=!1},methods:{show(){this.setInitialize().then(()=>{this.popupFrame=this.$el.getBoundingClientRect(),this.setPopupPositon(),this.isBackground&&this.setCreateMask(this.maskSelector),window.addEventListener("resize",this.setPopupPositon),window.dispatchEvent(new Event("resize"))})},setInitialize(){return new Promise(function(t,e){this.isShow=!0,this.curDocumentWidth=0,this.curDocumentHeight=0,this.checkExistPopup(),t()}.bind(this))},checkExistPopup(){let t=this.$el.parentNode.querySelectorAll(".layerPop");t.forEach(t=>{null!=t.style&&void 0!=t.style&&"block"==t.style.display&&this.$el!=t&&(this.popupZIndex+=1,this.maskZIndex+=1,this.popupCount+=1,this.maskSelector=`.${this.maskClassName}${this.popupCount}`)})},close(){this.isShow=!1,window.removeEventListener("resize",this.setPopupPositon),this.isBackground&&this.setDeleteMask(this.maskSelector),this.popupZIndex=200,this.maskZIndex=100,this.popupCount=0,this.maskSelector="."+this.maskClassName},getOffsetPosY(t){var e=0;t.offsetHeight;if(t.offsetParent){e=t.offsetTop;while(t=t.offsetParent)e+=t.offsetTop}return e-=window.scrollY,e},getOffsetPosX(t){var e=0;t.offsetWidth;if(t.offsetParent){e=t.offsetLeft;while(t=t.offsetParent)e+=t.offsetLeft}return e},setXPos(t){return new Promise(function(e,o){let s=this.getOffsetPosX(this.$el);s>0&&(this.leftPos-=s),t.width>this.popupFrame.width&&(this.leftPos+=(t.width-this.popupFrame.width)/2),s<0&&(this.leftPos-=s),e()}.bind(this))},setYPos(t){return new Promise(function(e,o){let s=this.getOffsetPosY(this.$el);s>0&&(this.topPos-=s),t.height>this.popupFrame.height&&(this.topPos+=(t.height-this.popupFrame.height)/2),s<0&&(this.topPos-=s),e()}.bind(this))},setPopupPositon(){let t=document.querySelector("#app").getBoundingClientRect();if(this.curDocumentWidth==document.body.clientWidth&&this.curDocumentHeight==document.body.clientHeight)return;this.curDocumentWidth=document.body.clientWidth,this.curDocumentHeight=document.body.clientHeight;let e=async()=>{let e=!1;while(1)if(await this.setXPos(t),this.leftPos>0&&this.$el.clientWidth>Math.round(this.popupFrame.width)?this.popupFrame=this.$el.getBoundingClientRect():e=!0,e)break},o=async()=>{await this.setYPos(t),this.popupFrame=this.$el.getBoundingClientRect()};e(),o()},setCreateMask(t){const e=this.$el.parentNode.querySelector(t);if(null!=e)e.style.display="block",this.closeOutside&&e.addEventListener("click",this.listner=t=>{this.clickClose()});else{const e=document.createElement("div");e.classList.add(t.replace(".","")),e.style.display="block",e.style.backgroundColor="gray",e.style.opacity="0.4",e.style.zIndex=this.maskZIndex,e.style.width="100%",e.style.height="100%",e.style.inset="0px",e.style.position="fixed",this.closeOutside&&e.addEventListener("click",this.listner=t=>{this.clickClose()}),this.$el.parentNode.insertBefore(e,null)}},getLogTop(t,e){console.log("************************"),console.log("frame.height: "+t.height),console.log("frame.top: "+t.top),console.log("popupFrame.height: "+e.height),console.log("popupFrame.top: "+e.top),console.log("popupFrame.y: "+e.y),console.log(t),console.log(e),console.log("************************")},getLogLeft(t,e){var o,s,i,l;console.log("************************"),console.log("frame.width: "+t.width),console.log("frame.left: "+t.left),console.log("popupFrame.width: "+e.width),console.log("popupFrame.left: "+e.left),console.log("this.$el.style.left: "+(null===(o=this.$el)||void 0===o||null===(s=o.style)||void 0===s?void 0:s.left)),console.log("this.$el?.getBoundingClientRect()?.width: "+(null===(i=this.$el)||void 0===i||null===(l=i.getBoundingClientRect())||void 0===l?void 0:l.width)),console.log(t),console.log(e),console.log("************************")},setDeleteMask(t){if(!this.isEmpty(this.$el.parentNode)){const e=this.$el.parentNode.querySelector(t);null!=e&&(e.style.display="none",e.removeEventListener("click",this.listner),e.remove())}},mousedownStartDrag(t){this.targetObj=this.$el,this.moveLeft=parseInt(this.targetObj.style.left.replace("px",""))-t.clientX,this.moveTop=parseInt(this.targetObj.style.top.replace("px",""))-t.clientY,document.onmousemove=this.mousemoveDrag,document.onmouseup=this.mouseupStopDrag,t.preventDefault&&t.preventDefault()},mousemoveDrag(t){var e=parseInt(t.clientX+this.moveLeft),o=parseInt(t.clientY+this.moveTop);return this.leftPos=e,this.topPos=o,!1},mouseupStopDrag(t){document.onmousemove=null,document.onmouseup=null},clickClose(){void 0==this.$listeners.clickCloseTopButton?this.close():this.$emit("clickCloseTopButton")}}},n=l,h=(o("3915"),o("2877")),a=Object(h["a"])(n,s,i,!1,null,"16a2374d",null);e["a"]=a.exports}}]);